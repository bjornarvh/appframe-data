var DataObject=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function u(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new a(n,r||e,i),l=o?o+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],u]:e._events[l].push(u):(e._events[l]=u,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=o?o+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(e){var t=o?o+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,r,i,a){var u=o?o+e:e;if(!this._events[u])return!1;var l,c,s=this._events[u],f=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),f){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,n),!0;case 4:return s.fn.call(s.context,t,n,r),!0;case 5:return s.fn.call(s.context,t,n,r,i),!0;case 6:return s.fn.call(s.context,t,n,r,i,a),!0}for(c=1,l=new Array(f-1);c<f;c++)l[c-1]=arguments[c];s.fn.apply(s.context,l)}else{var d,y=s.length;for(c=0;c<y;c++)switch(s[c].once&&this.removeListener(e,s[c].fn,void 0,!0),f){case 1:s[c].fn.call(s[c].context);break;case 2:s[c].fn.call(s[c].context,t);break;case 3:s[c].fn.call(s[c].context,t,n);break;case 4:s[c].fn.call(s[c].context,t,n,r);break;default:if(!l)for(d=1,l=new Array(f-1);d<f;d++)l[d-1]=arguments[d];s[c].fn.apply(s[c].context,l)}}return!0},c.prototype.on=function(e,t,n){return u(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return u(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,r){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return l(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||l(this,i);else{for(var u=0,c=[],s=a.length;u<s;u++)(a[u].fn!==t||r&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:l(this,i)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&l(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,e.exports=c},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function i(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.apply(void 0,n)}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.articleId,r=t.dataSourceId,o=t.fields,i=t.groupBy,a=t.timeout;n?this.articleId=n:window.af&&window.af.article&&(this.articleId=window.af.article.id),this.dataSourceId=r||null,this.fields=o||null,this.groupBy=i||null,this.timeout=a||3e4}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){return this.request("create",e,t)}},{key:"destroy",value:function(e,t){return this.request("destroy",e,t)}},{key:"retrieve",value:function(e,t){return this.request("retrieve",e,t)}},{key:"update",value:function(e,t){return this.request("update",e,t)}},{key:"request",value:function(e,t,n){var r=this;return new Promise(function(o,a){var u={body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"}},l=null,c="/".concat(e,"/").concat(r.articleId,"/").concat(r.dataSourceId),s=!1;r.fields&&(c+="/".concat(r.fields instanceof Array?r.fields.join("-"):r.fields)),r.groupBy&&(c+="/"+r.groupBy),window.AbortController&&(r.previousRequestController&&r.previousRequestController.abort(),l=new window.AbortController,r.previousRequestController=l,u.signal=r.previousRequestController.signal);var f=setTimeout(function(){l&&l.abort(),s=!0,o(!1)},r.timeout);fetch(c,u).then(function(e){return clearTimeout(f),!(s||l&&r.previousRequestController!==l)&&e.json()}).then(function(e){!1===e?o(!1):e.hasOwnProperty("success")?(i(n,null,e.success),o(e.success)):e.hasOwnProperty("error")&&(i(n,null,e.error),a(e.error))}).catch(function(e){"Aborted"===e.message||window.AbortError&&e instanceof window.AbortError?o(!1):a(e)})})}}])&&a(t.prototype,n),r&&a(t,r),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=[],(n="data")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"create",value:function(e){if("object"!==l(e))throw new TypeError("Record must be an object");return this.data.push(e)-1}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==this.getRecord())return this.data.splice(e,1),!0;throw new Error("No record found for index ".concat(e))}},{key:"getRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.data[e]||null}},{key:"length",value:function(){return this.data.length}},{key:"retrieve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"number"!=typeof e||isNaN(e)?this.data:this.getRecorddata[e]||null}},{key:"update",value:function(e,t){if(!this.getRecord(e))throw new Error("No record found for index ".concat(e));return t instanceof Array?this.data[e]=t:this.data[e]=Object.assign({},this.data[e],t),!0}}])&&c(t.prototype,n),r&&c(t,r),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={dataHandler:null,articleId:window.af&&window.af.article&&window.af.article.id,dataSourceId:null,timeout:3e4,errorHandler:function(e,t){window.alert(e),i(t,e,null)},linkFields:null,disableAutoload:!1,dynamicLoading:!1,allowDelete:!1,allowUpdate:!1,allowInsert:!1,strict:!1,selectFirstRow:!0,optimisticLocking:!1,hasIITrig:!1,hasIUTrig:!1,hasIDTrig:!1,parameters:{distinctRows:!1,filterObject:null,filterString:"",masterChildCriteria:{},maxRecords:-1,sortOrder:[],whereObject:null,whereClause:""},systemFieldNames:{},masterDataObject:null,groupBy:null,uniqueIdField:"PrimKey",fields:[]},m=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=p(t).call(this))||"object"!==f(o)&&"function"!=typeof o?h(r):o,w(h(h(n)),"_dataHandler",void 0),w(h(h(n)),"_storageEngine",new s),w(h(h(n)),"_options",void 0),w(h(h(n)),"_fieldNames",[]),w(h(h(n)),"_parametersChanged",!1),w(h(h(n)),"_currentIndex",null),w(h(h(n)),"_errorRecords",{}),w(h(h(n)),"_dirtyRecords",{}),w(h(h(n)),"_savingRecords",{}),w(h(h(n)),"_newRecord",{}),w(h(h(n)),"_dataLoaded",null),w(h(h(n)),"_dataSaving",!1),w(h(h(n)),"_dataLoading",!1),w(h(h(n)),"_temporarilyDisallowDelete",!1),w(h(h(n)),"_temporarilyDisallowUpdate",!1),w(h(h(n)),"_temporarilyDisallowInsert",!1),n._options=Object.assign({},b,e),e.parameters&&(n._options.parameters=Object.assign({},b.parameters,e.parameters)),n._dataHandler=e.dataHandler||new u({articleId:e.articleId,dataSourceId:e.dataSourceId,timeout:e.timeout}),delete n._options.dataHandler,delete n._options.storageEngine,n.initialize(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o.a),n=t,(r=[{key:"attachEvent",value:function(e,n){y(p(t.prototype),"on",this).call(this,e,n)}},{key:"detachEvent",value:function(e,n){y(p(t.prototype),"removeListener",this).call(this,e,n)}},{key:"cancelEdit",value:function(){}},{key:"cancelField",value:function(e){}},{key:"currentRow",value:function(){}},{key:"endEdit",value:function(){}},{key:"deleteCurrentRow",value:function(e){return new Promise(function(e,t){})}},{key:"deleteRow",value:function(e){return new Promise(function(e,t){})}},{key:"initialize",value:function(){var e=this;this.fields||this.getFieldsAsync().then(function(t){e.fields=t,e.initialize=null}),this.initialize=function(){console.warn("Data object ".concat(this.dataSourceId," has already been initialized."))},this.recordSource={};var t=Object.keys(this._options.parameters).filter(function(e){return!["distinctRows","masterChildCriteria"].includes(e)}),n=!0,r=!1,o=void 0;try{for(var i,a=function(){var t=i.value,n=t.substring(0,1).toUpperCase()+t.substring(3);e.recordSource["get".concat(n)]=function(){return e.getParameter(t)},e.recordSource["set".concat(n)]=function(n){return e.setParameter(t,n)}},u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}}},{key:"isDataLoaded",value:function(){}},{key:"isDataLoading",value:function(){}},{key:"isDeleteAllowed",value:function(){}},{key:"isUpdateAllowed",value:function(){}},{key:"isInsertAllowed",value:function(){}},{key:"isDeleteNeverAllowed",value:function(){}},{key:"isUpdateNeverAllowed",value:function(){}},{key:"isInsertNeverAllowed",value:function(){}},{key:"getCurrentIndex",value:function(){}},{key:"getData",value:function(e,t){}},{key:"getDataLength",value:function(){}},{key:"getDataSourceId",value:function(){}},{key:"getFields",value:function(){}},{key:"getFieldsAsync",value:function(){}},{key:"getMasterDataObject",value:function(){return this._options.masterDataObject}},{key:"getParameter",value:function(e){return this._options.parameters[e]||null}},{key:"refreshCurrentRow",value:function(e){return new Promise(function(e,t){})}},{key:"refreshDataSource",value:function(e){return new Promise(function(e,t){})}},{key:"refreshRow",value:function(e,t){return new Promise(function(e,t){})}},{key:"setAllowDelete",value:function(e){}},{key:"setAllowUpdate",value:function(e){}},{key:"setAllowInsert",value:function(e){}},{key:"setParameter",value:function(e,t){var n=["filterString","whereClause"].includes(e);if(this._options.strict&&n)throw new Error("Setting ".concat(e," is not allowed when dataObject is in strict mode"));n&&(t||(t=""),this.setParameter("filterString"===e?"filterObject":"whereObject",null)),this._options.parameters[e]!==t&&(this._options.parameters[e]=t,this.emit("onParameterUpdated",e))}}])&&d(n.prototype,r),i&&d(n,i),t}();t.default=m}]);