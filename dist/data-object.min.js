var DataObject=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";function r(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n),!0}return!1}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.r(t),n.d(t,"DataHandler",function(){return a});var r=n(0);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"articleId",void 0),i(this,"dataSourceId",void 0),i(this,"fields",void 0),i(this,"groupBy",void 0),i(this,"timeout",void 0),i(this,"previousController",null);var n=t.articleId,r=t.dataSourceId,o=t.fields,a=t.groupBy,u=t.timeout;if(n)this.articleId=n;else{if(!af||!af.article)throw new Error("No article ID given.");this.articleId=af.article.id}this.dataSourceId=r||null,this.fields=o||null,this.groupBy=a||null,this.timeout=u||3e4}var t,n,a;return t=e,(n=[{key:"create",value:function(e,t){return this.request("create",e,t)}},{key:"destroy",value:function(e,t){return this.request("destroy",e,t)}},{key:"retrieve",value:function(e,t){return this.request("retrieve",e,t)}},{key:"update",value:function(e,t){return this.request("update",e,t)}},{key:"request",value:function(e,t,n){var o=this;return new Promise(function(i,a){var u={body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"}},s=null,l="/".concat(e,"/").concat(o.articleId,"/").concat(o.dataSourceId),c=!1;o.fields&&(l+="/".concat(o.fields instanceof Array?o.fields.join("-"):o.fields)),o.groupBy&&(l+="/"+o.groupBy),"undefined"!=typeof AbortController&&(o.previousController&&o.previousController.abort(),s=new AbortController,o.previousController=s,u.signal=o.previousController.signal);var f=setTimeout(function(){s&&s.abort(),c=!0,i(!1)},o.timeout);fetch(l,u).then(function(e){return clearTimeout(f),c?Promise.resolve(!1):s&&o.previousController!==s?Promise.resolve(!1):e.json()}).then(function(e){!1===e?i(!1):e.hasOwnProperty("success")?(Object(r.a)(n,null,e.success),i(e.success)):e.hasOwnProperty("error")?(Object(r.a)(n,e.error),a(e.error)):a("Failed to interpret data returned from server")}).catch(function(e){"Aborted"===e.message||"undefined"!=typeof AbortError&&e instanceof AbortError?i(!1):a(e)})})}}])&&o(t.prototype,n),a&&o(t,a),e}()},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function u(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new a(n,r||e,i),s=o?o+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],u]:e._events[s].push(u):(e._events[s]=u,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=o?o+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(e){var t=o?o+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,i,a){var u=o?o+e:e;if(!this._events[u])return!1;var s,l,c=this._events[u],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,a),!0}for(l=1,s=new Array(f-1);l<f;l++)s[l-1]=arguments[l];c.fn.apply(c.context,s)}else{var d,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!s)for(d=1,s=new Array(f-1);d<f;d++)s[d-1]=arguments[d];c[l].fn.apply(c[l].context,s)}}return!0},l.prototype.on=function(e,t,n){return u(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return u(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||r&&!a[u].once||n&&a[u].context!==n)&&l.push(a[u]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=o,l.EventEmitter=l,e.exports=l},,function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(1);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s="Index must be a number and be within the range of the data indices.",l=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=[],(n="data")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"create",value:function(e){if("object"!==a(e))throw new TypeError("Record must be an object");return this.data.push(e)-1}},{key:"destroy",value:function(e){if(!this.isValidIndex(e))throw new TypeError(s);this.data.splice(e,1)}},{key:"isValidIndex",value:function(e){return"number"==typeof e&&!isNaN(e)&&(e>=0&&e<this.data.length)}},{key:"length",value:function(){return this.data.length}},{key:"retrieve",value:function(e){if(void 0===e)return this.data;if(this.isValidIndex(e))return this.data[e];throw new TypeError(s)}},{key:"update",value:function(e,t){if(!this.isValidIndex(e))throw new TypeError(s);if(t instanceof Array)this.data[e]=t;else{if("object"!==a(t))throw new TypeError("Record must be an object");this.data[e]=Object.assign({},this.data[e],t)}}}])&&u(t.prototype,n),r&&u(t,r),e}(),c=n(0);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"DataObject",function(){return m}),n.d(t,"DataHandler",function(){return i.DataHandler}),n.d(t,"MemoryStorage",function(){return l});var m=function(e){function t(){var e,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=y(t).call(this),e=!r||"object"!==f(r)&&"function"!=typeof r?v(n):r,b(v(v(e)),"_dataHandler",void 0),b(v(v(e)),"_storageEngine",new l),b(v(v(e)),"_options",{allowDelete:!1,allowUpdate:!1,allowInsert:!1,articleId:af&&af.article&&af.article.id,confirmHandler:function(e,t,n,r,o){return new Promise(function(e,n){confirm(t)?e(!0):n(o)})},dataSourceId:null,disableAutoload:!1,dynamicLoading:!1,fields:[],groupBy:null,linkFields:null,masterDataObject:null,optimisticLocking:!1,parameters:{distinctRows:!1,filterObject:null,filterString:"",masterChildCriteria:{},maxRecords:-1,sortOrder:[],whereObject:null,whereClause:""},selectFirstRow:!0,strict:!1,systemFieldNames:{},timeout:3e4,uniqueIdField:"PrimKey"}),b(v(v(e)),"_fields",[]),b(v(v(e)),"_parametersChanged",!1),b(v(v(e)),"_currentIndex",null),b(v(v(e)),"_currentLoadingPromise",null),b(v(v(e)),"_dataLoaded",null),b(v(v(e)),"_dataSaving",!1),b(v(v(e)),"_dataLoading",!1),b(v(v(e)),"_disableDelete",!1),b(v(v(e)),"_disableUpdate",!1),b(v(v(e)),"_disableInsert",!1),b(v(v(e)),"_recordStatus",new Map),b(v(v(e)),"recordSource",{getFilterObject:function(){return e.getParameter("filterObject")},getFilterString:function(){return e.getParameter("filterString")},getMaxRecords:function(){return e.getParameter("maxRecords")},getSortOrder:function(){return e.getParameter("sortOrder")},getWhereClause:function(){return e.getParameter("whereClause")},getWhereObject:function(){return e.getParameter("whereObject")},setFilterObject:function(t){return e.setParameter("filterObject",t)},setFilterString:function(t){return e.setParameter("filterString",t)},setMaxRecords:function(t){return e.setParameter("maxRecords",t)},setSortOrder:function(t){return e.setParameter("sortOrder",t)},setWhereClause:function(t){return e.setParameter("whereClause",t)},setWhereObject:function(t){return e.setParameter("whereObject",t)}});var a=Object.assign({},e._options),u=Object.assign(e._options.parameters,o.parameters);return e._options=Object.assign(a,o,{parameters:u}),e._dataHandler=o.dataHandler||new i.DataHandler({articleId:o.articleId,dataSourceId:o.dataSourceId,timeout:o.timeout}),e.initialize(),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o.a),n=t,(r=[{key:"areParametersChanged",value:function(){return this._parametersChanged}},{key:"areRecordsSaving",value:function(){return!1}},{key:"attachEvent",value:function(e,n){h(y(t.prototype),"on",this).call(this,e,n)}},{key:"detachEvent",value:function(e,n){h(y(t.prototype),"removeListener",this).call(this,e,n)}},{key:"cancelEdit",value:function(){return"number"==typeof this._currentIndex&&(this.isDirty(this._currentIndex)&&this.cleanRecord(this._currentIndex),this.emit("onCancelEdit",this._currentIndex),!0)}},{key:"cancelField",value:function(e){return null!==this._currentIndex&&this.cleanRecord(this._currentIndex,e)}},{key:"cleanRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t){var n=this._recordStatus.delete(e);return n&&(this.emit("onDirtyChanged",!1),this.emit("onRecordRefreshed",e)),n}var r=this._recordStatus.get(e);return!!r&&r.delete(t)}},{key:"clearFilter",value:function(){}},{key:"currentRow",value:function(){}},{key:"dataLastLoaded",value:function(){return new Date}},{key:"endEdit",value:function(e){return new Promise(function(e,t){})}},{key:"deleteCurrentRow",value:function(e){return new Promise(function(e,t){})}},{key:"deleteRow",value:function(e,t){return new Promise(function(e,t){})}},{key:"initialize",value:function(){var e=this;this._options.fields||this.getFieldsAsync().then(function(t){e._options.fields=t}),this.initialize=function(){console.warn("Data object ".concat(this._options.dataSourceId," has already been initialized."))}}},{key:"isDataLoaded",value:function(){return!1}},{key:"isDataLoading",value:function(){return!1}},{key:"isDeleteAllowed",value:function(){return this._options.allowDelete&&!this._disableDelete}},{key:"isDeleteNeverAllowed",value:function(){return this._options.allowDelete}},{key:"isDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"number"==typeof e?this.isRecordDirty(e):null===e&&null!==this._currentIndex?this.isRecordDirty(this._currentIndex):"string"==typeof e&&null!==this._currentIndex&&this.isFieldDirty(this._currentIndex,e)}},{key:"isFieldDirty",value:function(e,t){var n=this._recordStatus.get(e);return!(!n||!n.has(t))}},{key:"isRecordDirty",value:function(e){var t=this._recordStatus.get(e);return!!t&&t.size>0}},{key:"isInsertAllowed",value:function(){return this._options.allowInsert&&!this._disableInsert}},{key:"isInsertNeverAllowed",value:function(){return this._options.allowInsert}},{key:"isUpdateAllowed",value:function(){return this._options.allowUpdate&&!this._disableUpdate}},{key:"isUpdateNeverAllowed",value:function(){return this._options.allowUpdate}},{key:"getCurrentIndex",value:function(){return this._currentIndex}},{key:"getData",value:function(e,t){return{}}},{key:"getDataLength",value:function(){return this._storageEngine.length()}},{key:"getDataSourceId",value:function(){return this._options.dataSourceId}},{key:"getDirtyData",value:function(e,t){return null}},{key:"getFields",value:function(){throw new Error("Not implemented")}},{key:"getFieldsAsync",value:function(){return Promise.resolve([])}},{key:"getGroupBy",value:function(){return""}},{key:"getLinkFields",value:function(){return{}}},{key:"getMasterDataObject",value:function(){return this._options.masterDataObject}},{key:"getMaxRecords",value:function(){return-1}},{key:"getParameter",value:function(e){return e in this._options.parameters?this._options.parameters[e]:null}},{key:"getUniqueIdField",value:function(){return""}},{key:"refreshCurrentRow",value:function(e){return Promise.resolve(!1)}},{key:"refreshDataSource",value:function(e){var t=this;return this.isDirty()?this._options.confirmHandler("Reloading data","There are unsaved changes. Would you like to save before reloading data?","Save and reload","Reload without saving","Cancel reloading").then(function(n){return n?t.endEdit().then(function(){return t.refreshDataSource(e)}):(t.cancelEdit(),t.refreshDataSource(e))}).catch(function(){return!1}):null===this._currentLoadingPromise||this.areParametersChanged()?(this._currentLoadingPromise=new Promise(function(e,t){}),this._currentLoadingPromise):("function"==typeof e&&null!==this._currentLoadingPromise&&this._currentLoadingPromise.then(function(t){return Object(c.a)(e,t)}),this._currentLoadingPromise)}},{key:"refreshRow",value:function(e,t){return new Promise(function(e,t){})}},{key:"save",value:function(e,t){return Promise.resolve(!1)}},{key:"setAllowDelete",value:function(e){this._options.allowDelete&&this._disableDelete!==!e&&(this._disableDelete=!e,this.emit("onAllowDeleteChanged",e))}},{key:"setAllowUpdate",value:function(e){this._options.allowUpdate&&this._disableUpdate!==!e&&(this._disableUpdate=!e,this.emit("onAllowUpdateChanged",e))}},{key:"setAllowInsert",value:function(e){this._options.allowInsert&&this._disableInsert!==!e&&(this._disableInsert=!e,this.emit("onAllowInsertChanged",e))}},{key:"setConfirmHandler",value:function(e){}},{key:"setCurrentIndex",value:function(e){return!1}},{key:"setGroupBy",value:function(e){}},{key:"setParameter",value:function(e,t){var n=["filterString","whereClause"].includes(e);if(this._options.strict&&n)throw new Error("Setting ".concat(e," is not allowed when dataObject is in strict mode"));n&&(t||(t=""),this.setParameter("filterString"===e?"filterObject":"whereObject",null)),this._options.parameters[e]!==t&&(this._options.parameters[e]=t,this.emit("onParameterUpdated",e))}}])&&d(n.prototype,r),a&&d(n,a),t}()}]);