(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.getLocalizedString=b()})(this,function(){"use strict";function a(a){if("function"==typeof a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];a.apply(void 0,c)}}function b(a){var b=a.articleId,c=a.dataSourceId,d=a.fields,e=a.groupBy;b?this.articleId=b:window.af&&window.af.article&&(this.articleId=window.af.article.id),this.dataSourceId=c||null,this.fields=d||null,this.groupBy=e||null}return b.prototype.create=function(a,b){return this.request("create",a,b)},b.prototype.destroy=function(a,b){return this.request("destroy",a,b)},b.prototype.retrieve=function(a,b){return this.request("retrieve",a,b)},b.prototype.update=function(a,b){return this.request("update",a,b)},b.prototype.request=function(b,c,d){var e=this,f={body:JSON.stringify(c),method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"}},g="/".concat(b,"/").concat(this.articleId,"/").concat(this.dataSourceId);return this.fields&&(g+="/".concat(this.fields instanceof Array?this.fields.join("-"):this.fields)),this.groupBy&&(g+="/"+this.groupBy),window.AbortController&&(this.previousRequestController&&this.previousRequestController.abort(),this.previousRequestController=new window.AbortController,f.signal=this.previousRequestController.signal),fetch(g,f).then(function(a){return a.json}).then(function(b){if(e.previousRequestController&&e.previousRequestController.signal===f.signal&&(e.previousRequestController=null),b.hasOwnProperty("success"))return a(d,null,b.success),b;if(b.hasOwnProperty("error"))throw a(d,null,b.error),new Error(b.error)}).catch(function(a){if(window.AbortError||!(a instanceof window.AbortError))throw new Error(a)})},b});
